Proyecto zabbix en contenedores usando docker compose:






REPOSITORIO DE ZABBIX
wget https://repo.zabbix.com/zabbix/6.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_6.4-1+ubuntu22.04_all.deb
   64  dpkg -i zabbix-release_6.4-1+ubuntu22.04_all.deb
   65  apt update 
   66  apt install zabbix-agent2 zabbix-agent2-plugin-*
   67  systemctl restart zabbix-agent2
   68  systemctl enable zabbix-agent2
   69  systemctl status  zabbix-agent2

Cambiando el hostname del linux   
hostnamectl  set-hostname ubuntumiguel01
   74  exec hostnamectl 
   75  cat /etc/hosts

########################################################################
Implementando zabbix on-premises:

Estructura completa en sdb






bash# 1. Crear PV y VG
pvcreate /dev/sdb
vgcreate vg_zabbix /dev/sdb

# 2. Crear todos los LVs
lvcreate -L 20G -n lv_mysql vg_zabbix
lvcreate -L 10G -n lv_zabbix_logs vg_zabbix
lvcreate -L 5G  -n lv_zabbix_web vg_zabbix
lvcreate -L 1G  -n lv_zabbix_etc vg_zabbix

# 3. Formatear
mkfs.xfs /dev/vg_zabbix/lv_mysql
mkfs.xfs /dev/vg_zabbix/lv_zabbix_logs
mkfs.xfs /dev/vg_zabbix/lv_zabbix_web
mkfs.xfs /dev/vg_zabbix/lv_zabbix_etc

# 4. Crear directorios
mkdir -p /var/lib/mysql
mkdir -p /var/log/zabbix
mkdir -p /usr/share/zabbix
mkdir -p /etc/zabbix

# 5. Agregar a fstab
cat >> /etc/fstab << 'EOF'
/dev/vg_zabbix/lv_mysql        /var/lib/mysql      xfs  defaults  0 0
/dev/vg_zabbix/lv_zabbix_logs  /var/log/zabbix     xfs  defaults  0 0
/dev/vg_zabbix/lv_zabbix_web   /usr/share/zabbix   xfs  defaults  0 0
/dev/vg_zabbix/lv_zabbix_etc   /etc/zabbix         xfs  defaults  0 0
EOF

# 6. Montar todo
mount -a

# 7. Verificar
df -h | grep zabbix
lsblk /dev/sdb

