Proyecto zabbix en contenedores usando docker compose:






REPOSITORIO DE ZABBIX
wget https://repo.zabbix.com/zabbix/6.4/ubuntu/pool/main/z/zabbix-release/zabbix-release_6.4-1+ubuntu22.04_all.deb
   64  dpkg -i zabbix-release_6.4-1+ubuntu22.04_all.deb
   65  apt update 
   66  apt install zabbix-agent2 zabbix-agent2-plugin-*
   67  systemctl restart zabbix-agent2
   68  systemctl enable zabbix-agent2
   69  systemctl status  zabbix-agent2

Cambiando el hostname del linux   
hostnamectl  set-hostname ubuntumiguel01
   74  exec hostnamectl 
   75  cat /etc/hosts

########################################################################
Implementando zabbix on-premises:

Estructura completa en sdb






bash# 1. Crear PV y VG
pvcreate /dev/sdb
vgcreate vg_zabbix /dev/sdb

# 2. Crear todos los LVs
lvcreate -L 20G -n lv_mysql vg_zabbix
lvcreate -L 10G -n lv_zabbix_logs vg_zabbix
lvcreate -L 5G  -n lv_zabbix_web vg_zabbix
lvcreate -L 1G  -n lv_zabbix_etc vg_zabbix

# 3. Formatear
mkfs.xfs /dev/vg_zabbix/lv_mysql
mkfs.xfs /dev/vg_zabbix/lv_zabbix_logs
mkfs.xfs /dev/vg_zabbix/lv_zabbix_web
mkfs.xfs /dev/vg_zabbix/lv_zabbix_etc

# 4. Crear directorios
mkdir -p /var/lib/mysql
mkdir -p /var/log/zabbix
mkdir -p /usr/share/zabbix
mkdir -p /etc/zabbix

# 5. Agregar a fstab
cat >> /etc/fstab << 'EOF'
/dev/vg_zabbix/lv_mysql        /var/lib/mysql      xfs  defaults  0 0
/dev/vg_zabbix/lv_zabbix_logs  /var/log/zabbix     xfs  defaults  0 0
/dev/vg_zabbix/lv_zabbix_web   /usr/share/zabbix   xfs  defaults  0 0
/dev/vg_zabbix/lv_zabbix_etc   /etc/zabbix         xfs  defaults  0 0
EOF

# 6. Montar todo
mount -a

# 7. Verificar
df -h | grep zabbix
lsblk /dev/sdb


# Instalar herramientas b치sicas
dnf install -y epel-release vim wget curl net-tools bind-utils telnet

# Instalar y habilitar Chrony (NTP)
dnf install -y chrony
systemctl enable chronyd --now
chronyc tracking

# Configurar hostname
hostnamectl set-hostname zabbix.dominio.pe
echo "$(hostname -I | awk '{print $1}') zabbix.dominio.pe zabbix" >> /etc/hosts


PASO 3: Instalar MySQL 8.0
bash# Instalar repositorio MySQL
dnf install -y https://dev.mysql.com/get/mysql80-community-release-el9-4.noarch.rpm

# Instalar MySQL Server
dnf install -y mysql-community-server

# Iniciar y habilitar
systemctl enable mysqld --now

# Obtener password temporal
grep 'temporary password' /var/log/mysqld.log

# Ejecutar secure installation (cambiar password root)
mysql_secure_installation
PASO 4: Crear Base de Datos Zabbix
bash# Conectar a MySQL
mysql -u root -p

# Ejecutar estos comandos SQL:
CREATE DATABASE zabbix CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;
CREATE USER 'zabbix'@'localhost' IDENTIFIED BY 'TU_PASSWORD_SEGURO';
GRANT ALL PRIVILEGES ON zabbix.* TO 'zabbix'@'localhost';
SET GLOBAL log_bin_trust_function_creators = 1;
FLUSH PRIVILEGES;
EXIT;
PASO 5: Instalar Zabbix 7.0 LTS (Oficial)
bash# a. Instalar repositorio Zabbix
rpm -Uvh https://repo.zabbix.com/zabbix/7.0/rocky/9/x86_64/zabbix-release-latest-7.0.el9.noarch.rpm
dnf clean all


# Excluir paquetes Zabbix de EPEL
dnf config-manager --setopt=epel.excludepkgs=zabbix* --save

# Limpiar cache
dnf clean all

# Reinstalar
dnf install -y zabbix-server-mysql zabbix-web-mysql zabbix-nginx-conf zabbix-sql-scripts zabbix-selinux-policy zabbix-agent2



# b. Instalar paquetes Zabbix
dnf install -y zabbix-server-mysql zabbix-web-mysql zabbix-nginx-conf zabbix-sql-scripts zabbix-selinux-policy zabbix-agent2

# c. Importar esquema (2-5 min)
zcat /usr/share/zabbix-sql-scripts/mysql/server.sql.gz | mysql --default-character-set=utf8mb4 -uzabbix -p zabbix

# d. Desactivar log_bin_trust_function_creators
mysql -u root -p -e "SET GLOBAL log_bin_trust_function_creators = 0;"
PASO 6: Configurar Zabbix Server
bash# Editar configuraci칩n
vim /etc/zabbix/zabbix_server.conf

# Configurar estos par치metros:
DBPassword=TU_PASSWORD_SEGURO
PASO 7: Configurar NGINX
bash# Editar configuraci칩n NGINX
vim /etc/nginx/conf.d/zabbix.conf

# Descomentar y configurar:
listen 8080;
server_name zabbix.marriott.local;
PASO 8: Configurar PHP Timezone
bashvim /etc/php-fpm.d/zabbix.conf

# Descomentar y configurar:
php_value[date.timezone] = America/Lima
PASO 9: Iniciar Servicios
bashsystemctl restart zabbix-server zabbix-agent2 nginx php-fpm
systemctl enable zabbix-server zabbix-agent2 nginx php-fpm
```

## PASO 10: Acceder al Frontend
```
URL: http://<IP_SERVIDOR>:8080
Usuario: Admin
Password: zabbix

